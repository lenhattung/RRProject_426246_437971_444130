
```{r settings_1, include=FALSE}
#install needed packages more easily with pacman
if (!require("pacman")) install.packages("pacman")

pacman::p_load(                                # Install or/and import libraries.
               "ggplot2",
               "tidyverse",
               "dplyr",
               "wbstats",
               "gmm",
               "reticulate",
               "data.table",
               "panelvar",
               "pdynmc",
               "tidyr",
               "plm" # packages
)


Sys.setlocale("LC_TIME", "English")

```

# Import  dataset from world databank

```{r}
# Define indicators
my_indicators <- c(                         
  C = "EN.ATM.CO2E.PC",  #CO2 emissions (metric tons per capita)
  E ="EG.USE.PCAP.KG.OE",  #Energy use (kg of oil equivalent per capita)
  Y = "NY.GDP.PCAP.KD", # GDP per capita (constant 2015 US$)
  URB = "SP.URB.TOTL.IN.ZS", #Urban population (% of total population)
  TR = "NE.TRD.GNFS.ZS" # Trade (% of GDP)
)

# Query data
world_stats <- wb_data(my_indicators, start_date = 1990, end_date = 2012) 

```


# Extract "country" "date"    "E"       "C"       "TR"      "Y"       "URB" columns
```{r}
df <- world_stats[,3:length(names(world_stats))]
head(df)
```

# structure of dataset

```{r}
glimpse(df)
```
 
# Missing variables check

```{r}
print(colSums(is.na(df)))
```

# Handle Missing values
In article missing values haven't been metioned that's why we will use just complete case, namely
dataset without NAs

```{r}
df <- df[complete.cases(df),]  #only complete dataset
```

# Create Squared per capita (quadric form)

```{r}
#Create Y^2
df$logY2 = log(df$Y)*log(df$Y)
```

# checking Missing Variables

```{r}
print(colSums(is.na(df)))
```

# Create an ID column for Panel data analysis based on the countries
